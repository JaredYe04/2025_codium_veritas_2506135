#predict_medal_counts.csv
#这个文件存放量奖牌的总数变化以及预测，现在我们需要获取每一届相对于上一届的奖牌数变化趋势（由于之前已经预测过，因此这里只需要计算实际的变化趋势即可）

import pandas as pd
import numpy as np

# 读取数据
data = pd.read_csv('./data/predict_medal_counts.csv')


#示例数据
# Sport,1896,1900,1904,1906,1908,1912,1920,1924,1928,1932,1936,1948,1952,1956,1960,1964,1968,1972,1976,1980,1984,1988,1992,1996,2000,2004,2008,2012,2016,2020,2024,2028,2032,2036
# Aquatics,4,8,12,5,9,14,16,17,16.0,16.0,16.0,16.0,16.0,18.0,20.0,23.0,34.0,34.0,31.0,31.0,36.0,38.0,38.0,38.0,44.0,44.0,46.0,46.0,46.0,49.0,49.0,[50.25959823],[51.65834472],[53.0570912]
# Archery,0,7,6,0,3,0,10,0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,2.0,2.0,2.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,5.0,5.0,[3.47247891],[3.53327976],[3.59408062]
# Athletics,12,23,25,21,26,30,29,27,27.0,29.0,29.0,33.0,33.0,33.0,34.0,36.0,36.0,38.0,37.0,38.0,41.0,42.0,43.0,44.0,46.0,46.0,47.0,47.0,47.0,48.0,48.0,[50.40657292],[51.3049471],[52.20332128]
# Badminton,0,0,0,0,0,0,0,0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,[4.33462435],[4.50825231],[4.68188027]


#计算变化趋势
result = []

for index, row in data.iterrows():
    #计算变化
    trend = []
    for i in range(1, len(row)-1):
        trend.append(row[i + 1] - row[i])
    result.append([row['Sport']] + trend)
    
result = pd.DataFrame(result, columns=['Sport',1900,1904,1906,1908,1912,1920,1924,1928,1932,1936,1948,1952,1956,1960,1964,1968,1972,1976,1980,1984,1988,1992,1996,2000,2004,2008,2012,2016,2020,2024,2028,2032,2036])
#在Sport后面插入一列1896,并赋值为0
result.insert(1, 1896, 0)
result.to_csv('./data/predict_medal_trend.csv', index=False)