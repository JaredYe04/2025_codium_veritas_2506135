function add_datalayer_event_to_targets(){document.querySelectorAll("[data-dl-event]").forEach((e=>{e.hasAttribute("dl-event-present")||(e.addEventListener("click",(e=>{let t=e.currentTarget,a=t.getAttribute("data-dl-event"),n=t.getAttribute("data-dl-props");if(""===a||null===a||""===n||null===n)return;n=JSON.parse(nlsn_unescape_quotes(n));let i={};i.event=a;for(const e in n)i[e]=n[e];window.dataLayer=window.dataLayer||[],window.dataLayer.push(i),e.stopPropagation()})),e.setAttribute("dl-event-present","true"))}))}jQuery(document).one("nfFormReady",(function(e){add_datalayer_event_to_targets()})),document.addEventListener("postsLoaded",add_datalayer_event_to_targets);const get_nf_field_value=(e,t)=>{let a=Object.keys(e).find((e=>e.startsWith(t)));if(!a)return"N/A";let n=e[a].value,i=null;return i="speak_with_sales"!==t&&"remember_me"!==t&&"newsletter"!==t||!Array.isArray(n)?"inquiry_type"!==t||""!==n&&!1!==n?e[a].value:"N/A":n.length>0?"true":"false",""!==i&&null!==i||(i="N/A"),i};function bind_form_data_layer_event(){const e=[{form_identifier_class:"datalayer-report-download",event_name:"report_download_form",datalayer_fields:[{field_name:"industry",key:"industry"},{field_name:"company",key:"company"},{field_name:"jobTitle",key:"job_title"},{field_name:"speakWithSalesCheckbox",key:"speak_with_sales"},{field_name:"inquiryType",key:"inquiry_type"},{field_name:"newsCheckbox",key:"newsletter"},{field_name:"location",key:"location"},{field_name:"campaignTag",key:"campaigns_taxonomy_term"},{field_name:"reportFileName",key:"form_attachment_1_url"},{field_name:"reportName",key:"form_attachment_1_title"},{field_name:"pardotId",key:"hidden_pardot_id"},{field_name:"salesforceId",key:"custom_val_N/A"},{field_name:"websiteLeadId",key:"custom_lead_id"},{field_name:"rememberMe",key:"remember_me"}]},{form_identifier_class:"datalayer-contact-us",event_name:"contact_us_form",datalayer_fields:[{field_name:"industry",key:"industry"},{field_name:"company",key:"company"},{field_name:"location",key:"location"},{field_name:"areaOfInterest",key:"area_of_interest"},{field_name:"inquiryType",key:"inquiry_type"},{field_name:"newsCheckbox",key:"newsletter"},{field_name:"pardotId",key:"hidden_pardot_id"},{field_name:"salesforceId",key:"custom_val_N/A"},{field_name:"websiteLeadId",key:"custom_lead_id"},{field_name:"campaignTag",key:"campaigns_taxonomy_term"}]},{form_identifier_class:"data-layer-webinar",event_name:"webinar_registration_form",datalayer_fields:[{field_name:"jobTitle",key:"job_title"},{field_name:"industry",key:"industry"},{field_name:"location",key:"location"},{field_name:"company",key:"company"},{field_name:"newsCheckbox",key:"newsletter"},{field_name:"pardotId",key:"hidden_pardot_id"},{field_name:"speakWithSalesCheckbox",key:"speak_with_sales"},{field_name:"salesforceId",key:"custom_val_N/A"},{field_name:"websiteLeadId",key:"custom_lead_id"},{field_name:"campaignTag",key:"campaigns_taxonomy_term"},{field_name:"websiteLeadId",key:"custom_lead_id"}]},{form_identifier_class:"datalayer-newsletter",event_name:"email_subscription_form",datalayer_fields:[{field_name:"newsletterName",key:"custom_val_Newsletter"},{field_name:"pardotId",key:"hidden_pardot_id"},{field_name:"salesforceId",key:"custom_val_N/A"},{field_name:"websiteLeadId",key:"custom_lead_id"}]}];nfRadio.channel("forms").on("submit:response",(t=>{let a=t.errors;if(0===Object.keys(a).length){("undefined"==typeof datalayer_ninjaform?e:datalayer_ninjaform).forEach((e=>{if(t.data.settings.wrapper_class.toLowerCase().includes(e.form_identifier_class.toLowerCase())){let a={event:e.event_name};"webinar_registration_form"===e.event_name?(a.webinarName=t.data.settings.title,a.formName=t.data.settings.title,a.formId=t.data.form_id,a.formtype="ninja form"):(a.formName=t.data.settings.title,a.formId=t.data.form_id,a.formtype="ninja form"),e.datalayer_fields.forEach((e=>{let n,i=e.field_name;if(e.key.startsWith("custom_val"))n=e.key.substr(11);else{let a=e.key;n=get_nf_field_value(t.data.fields_by_key,a)}a[i]=n})),"contact_us_form"===a.event.toString()&&"sales"===a.areaOfInterest.toString()&&"false"===a.inquiryType.toString()&&(a.inquiryType=get_nf_field_value(t.data.fields_by_key,["sales_inquiry"]).toLowerCase()),window.dataLayer=window.dataLayer||[],window.dataLayer.push(a);let n=document.getElementById(`nf-form-${t.data.form_id}-cont`).closest("div[x-data]");if(null===n||!n.getAttribute("id").startsWith("modal"))return;document.dispatchEvent(new CustomEvent(`${n.getAttribute("id")}-gating`,{bubbles:!0})),"true"===get_nf_field_value(t.data.fields_by_key,"remember_me")&&(document.cookie=`nlsn-pop-up|${t.data.form_id}=${n.getAttribute("id")}; max-age=604800`)}}))}else{let e={},r=get_nf_field_value(t.data.fields_by_key,["hidden_pardot_id"]),o=get_nf_field_value(t.data.fields_by_key,["hidden_lead_id"]);for(key in e.event="form_submit_failure",e.formName=t.data.settings.title,a){var n=a[key];for(var i in n){var d=n[i];e.failureReason=d}}e.pardotID=r??"N/A",e.salesforceId="N/A",e.websiteLeadId=o,window.dataLayer=window.dataLayer||[],window.dataLayer.push(e)}}))}jQuery(document).one("nfFormReady",(()=>{bind_form_data_layer_event()}));let formInfos={},formInfoAggregator=Marionette.Object.extend({initialize:function(){let e=Backbone.Radio.channel("forms");this.listenTo(e,"init:model",this.storeFormData)},storeFormData:function(e){let t=e.get("id"),a=e.get("title"),n=e.attributes.fields.models,i="";for(let e of n){if(e.attributes.key.startsWith("hidden_lead_id")){i=e.attributes.value;break}}formInfos[t]={title:a,leadID:i}}}),formStartDatalayerController=Marionette.Object.extend({initialize:function(){let e=Backbone.Radio.channel("fields");this.listenTo(e,"change:modelValue",this.dataLayerPush)},dataLayerPush:function(e){let t=e.get("value"),a=e.get("label"),n=formInfos[e.get("formID")];if(n){let i="title"in n?n.title:"no_title";"leadID"in n&&n.leadID;if(void 0!==i&&""!==a&&""!==t&&"hidden"!==e.attributes.type){let e={event:"form_field_start"};e.formName=i,e.formFieldName=a,e.pardotID=pardotId??"N/A",e.salesforceId="N/A",window.dataLayer=window.dataLayer||[];let t=window.dataLayer,n=!1;for(let e of t)"event"in e==!0&&"form_field_start"===e.event&&"no_title"!==i&&e.formName===i&&(n=!0);n||window.dataLayer.push(e)}}}});jQuery((function(){new formInfoAggregator,setTimeout((function(){new formStartDatalayerController}),1500)}));